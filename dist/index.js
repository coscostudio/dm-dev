"use strict";(()=>{var Mt=Object.create;var _e=Object.defineProperty;var Rt=Object.getOwnPropertyDescriptor;var Ct=Object.getOwnPropertyNames;var It=Object.getPrototypeOf,_t=Object.prototype.hasOwnProperty;var zt=(i,r,o)=>r in i?_e(i,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[r]=o;var Dt=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports);var qt=(i,r,o,l)=>{if(r&&typeof r=="object"||typeof r=="function")for(let p of Ct(r))!_t.call(i,p)&&p!==o&&_e(i,p,{get:()=>r[p],enumerable:!(l=Rt(r,p))||l.enumerable});return i};var Wt=(i,r,o)=>(o=i!=null?Mt(It(i)):{},qt(r||!i||!i.__esModule?_e(o,"default",{value:i,enumerable:!0}):o,i));var f=(i,r,o)=>zt(i,typeof r!="symbol"?r+"":r,o);var Ye=Dt((ze,De)=>{(function(i,r){typeof ze=="object"&&typeof De<"u"?De.exports=r():typeof define=="function"&&define.amd?define(r):(i||self).barba=r()})(ze,function(){function i(a,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,typeof(s=function(c,u){if(typeof c!="object"||c===null)return c;var d=c[Symbol.toPrimitive];if(d!==void 0){var h=d.call(c,"string");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}(t.key))=="symbol"?s:String(s),t)}var s}function r(a,n,e){return n&&i(a.prototype,n),e&&i(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function o(){return o=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}return a},o.apply(this,arguments)}function l(a,n){a.prototype=Object.create(n.prototype),a.prototype.constructor=a,w(a,n)}function p(a){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p(a)}function w(a,n){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(a,n)}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(a,n,e){return g=x()?Reflect.construct.bind():function(t,s,c){var u=[null];u.push.apply(u,s);var d=new(Function.bind.apply(t,u));return c&&w(d,c.prototype),d},g.apply(null,arguments)}function y(a){var n=typeof Map=="function"?new Map:void 0;return y=function(e){if(e===null||Function.toString.call(e).indexOf("[native code]")===-1)return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return g(e,arguments,p(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),w(t,e)},y(a)}function _(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}var A,q=function(){this.before=void 0,this.beforeLeave=void 0,this.leave=void 0,this.afterLeave=void 0,this.beforeEnter=void 0,this.enter=void 0,this.afterEnter=void 0,this.after=void 0};(function(a){a[a.off=0]="off",a[a.error=1]="error",a[a.warning=2]="warning",a[a.info=3]="info",a[a.debug=4]="debug"})(A||(A={}));var b=A.off,H=function(){function a(e){this.t=void 0,this.t=e}a.getLevel=function(){return b},a.setLevel=function(e){return b=A[e]};var n=a.prototype;return n.error=function(){this.i(console.error,A.error,[].slice.call(arguments))},n.warn=function(){this.i(console.warn,A.warning,[].slice.call(arguments))},n.info=function(){this.i(console.info,A.info,[].slice.call(arguments))},n.debug=function(){this.i(console.log,A.debug,[].slice.call(arguments))},n.i=function(e,t,s){t<=a.getLevel()&&e.apply(console,["["+this.t+"] "].concat(s))},a}();function I(a){return a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function F(a){return a&&a.sensitive?"":"i"}var O={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},te=function(){function a(){this.o=O,this.u=void 0,this.h={after:null,before:null,parent:null}}var n=a.prototype;return n.toString=function(e){return e.outerHTML},n.toDocument=function(e){return this.u||(this.u=new DOMParser),this.u.parseFromString(e,"text/html")},n.toElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t},n.getHtml=function(e){return e===void 0&&(e=document),this.toString(e.documentElement)},n.getWrapper=function(e){return e===void 0&&(e=document),e.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},n.getContainer=function(e){return e===void 0&&(e=document),e.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},n.removeContainer=function(e){document.body.contains(e)&&(this.v(e),e.parentNode.removeChild(e))},n.addContainer=function(e,t){var s=this.getContainer()||this.h.before;s?this.l(e,s):this.h.after?this.h.after.parentNode.insertBefore(e,this.h.after):this.h.parent?this.h.parent.appendChild(e):t.appendChild(e)},n.getSibling=function(){return this.h},n.getNamespace=function(e){e===void 0&&(e=document);var t=e.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return t?t.getAttribute(this.o.prefix+"-"+this.o.namespace):null},n.getHref=function(e){if(e.tagName&&e.tagName.toLowerCase()==="a"){if(typeof e.href=="string")return e.href;var t=e.getAttribute("href")||e.getAttribute("xlink:href");if(t)return this.resolveUrl(t.baseVal||t)}return null},n.resolveUrl=function(){var e=[].slice.call(arguments).length;if(e===0)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],e===1)return t.href;var s=document.getElementsByTagName("head")[0];s.insertBefore(t,s.firstChild);for(var c,u=document.createElement("a"),d=1;d<e;d++)u.href=arguments[d],t.href=c=u.href;return s.removeChild(t),c},n.l=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},n.v=function(e){return this.h={after:e.nextElementSibling,before:e.previousElementSibling,parent:e.parentElement},this.h},a}(),B=new te,ie=function(){function a(){this.p=void 0,this.m=[],this.P=-1}var n=a.prototype;return n.init=function(e,t){this.p="barba";var s={data:{},ns:t,scroll:{x:window.scrollX,y:window.scrollY},url:e};this.P=0,this.m.push(s);var c={from:this.p,index:this.P,states:[].concat(this.m)};window.history&&window.history.replaceState(c,"",e)},n.change=function(e,t,s){if(s&&s.state){var c=s.state,u=c.index;t=this.g(this.P-u),this.replace(c.states),this.P=u}else this.add(e,t);return t},n.add=function(e,t,s,c){var u=s??this.R(t),d={data:c??{},ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:e};switch(u){case"push":this.P=this.size,this.m.push(d);break;case"replace":this.set(this.P,d)}var h={from:this.p,index:this.P,states:[].concat(this.m)};switch(u){case"push":window.history&&window.history.pushState(h,"",e);break;case"replace":window.history&&window.history.replaceState(h,"",e)}},n.store=function(e,t){var s=t||this.P,c=this.get(s);c.data=o({},c.data,e),this.set(s,c);var u={from:this.p,index:this.P,states:[].concat(this.m)};window.history.replaceState(u,"")},n.update=function(e,t){var s=t||this.P,c=o({},this.get(s),e);this.set(s,c)},n.remove=function(e){e?this.m.splice(e,1):this.m.pop(),this.P--},n.clear=function(){this.m=[],this.P=-1},n.replace=function(e){this.m=e},n.get=function(e){return this.m[e]},n.set=function(e,t){return this.m[e]=t},n.R=function(e){var t="push",s=e,c=O.prefix+"-"+O.history;return s.hasAttribute&&s.hasAttribute(c)&&(t=s.getAttribute(c)),t},n.g=function(e){return Math.abs(e)>1?e>0?"forward":"back":e===0?"popstate":e>0?"back":"forward"},r(a,[{key:"current",get:function(){return this.m[this.P]}},{key:"previous",get:function(){return this.P<1?null:this.m[this.P-1]}},{key:"size",get:function(){return this.m.length}}]),a}(),oe=new ie,X=function(a,n){try{var e=function(){if(!n.next.html)return Promise.resolve(a).then(function(t){var s=n.next;if(t){var c=B.toElement(t.html);s.namespace=B.getNamespace(c),s.container=B.getContainer(c),s.url=t.url,s.html=t.html,oe.update({ns:s.namespace});var u=B.toDocument(t.html);document.title=u.title}})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},Z=function a(n,e,t){return n instanceof RegExp?function(s,c){if(!c)return s;for(var u=/\((?:\?<(.*?)>)?(?!\?)/g,d=0,h=u.exec(s.source);h;)c.push({name:h[1]||d++,prefix:"",suffix:"",modifier:"",pattern:""}),h=u.exec(s.source);return s}(n,e):Array.isArray(n)?function(s,c,u){var d=s.map(function(h){return a(h,c,u).source});return new RegExp("(?:".concat(d.join("|"),")"),F(u))}(n,e,t):function(s,c,u){return function(d,h,m){m===void 0&&(m={});for(var N=m.strict,T=N!==void 0&&N,v=m.start,R=v===void 0||v,E=m.end,S=E===void 0||E,C=m.encode,M=C===void 0?function(ye){return ye}:C,G=m.delimiter,D=G===void 0?"/#?":G,Y=m.endsWith,ne="[".concat(I(Y===void 0?"":Y),"]|$"),ee="[".concat(I(D),"]"),U=R?"^":"",K=0,Q=d;K<Q.length;K++){var k=Q[K];if(typeof k=="string")U+=I(M(k));else{var V=I(M(k.prefix)),L=I(M(k.suffix));if(k.pattern)if(h&&h.push(k),V||L)if(k.modifier==="+"||k.modifier==="*"){var W=k.modifier==="*"?"?":"";U+="(?:".concat(V,"((?:").concat(k.pattern,")(?:").concat(L).concat(V,"(?:").concat(k.pattern,"))*)").concat(L,")").concat(W)}else U+="(?:".concat(V,"(").concat(k.pattern,")").concat(L,")").concat(k.modifier);else U+=k.modifier==="+"||k.modifier==="*"?"((?:".concat(k.pattern,")").concat(k.modifier,")"):"(".concat(k.pattern,")").concat(k.modifier);else U+="(?:".concat(V).concat(L,")").concat(k.modifier)}}if(S)T||(U+="".concat(ee,"?")),U+=m.endsWith?"(?=".concat(ne,")"):"$";else{var P=d[d.length-1],J=typeof P=="string"?ee.indexOf(P[P.length-1])>-1:P===void 0;T||(U+="(?:".concat(ee,"(?=").concat(ne,"))?")),J||(U+="(?=".concat(ee,"|").concat(ne,")"))}return new RegExp(U,F(m))}(function(d,h){h===void 0&&(h={});for(var m=function(L){for(var W=[],P=0;P<L.length;){var J=L[P];if(J!=="*"&&J!=="+"&&J!=="?")if(J!=="\\")if(J!=="{")if(J!=="}")if(J!==":")if(J!=="(")W.push({type:"CHAR",index:P,value:L[P++]});else{var ye=1,xe="";if(L[j=P+1]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(j));for(;j<L.length;)if(L[j]!=="\\"){if(L[j]===")"){if(--ye==0){j++;break}}else if(L[j]==="("&&(ye++,L[j+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(j));xe+=L[j++]}else xe+=L[j++]+L[j++];if(ye)throw new TypeError("Unbalanced pattern at ".concat(P));if(!xe)throw new TypeError("Missing pattern at ".concat(P));W.push({type:"PATTERN",index:P,value:xe}),P=j}else{for(var Ie="",j=P+1;j<L.length;){var ce=L.charCodeAt(j);if(!(ce>=48&&ce<=57||ce>=65&&ce<=90||ce>=97&&ce<=122||ce===95))break;Ie+=L[j++]}if(!Ie)throw new TypeError("Missing parameter name at ".concat(P));W.push({type:"NAME",index:P,value:Ie}),P=j}else W.push({type:"CLOSE",index:P,value:L[P++]});else W.push({type:"OPEN",index:P,value:L[P++]});else W.push({type:"ESCAPED_CHAR",index:P++,value:L[P++]});else W.push({type:"MODIFIER",index:P,value:L[P++]})}return W.push({type:"END",index:P,value:""}),W}(d),N=h.prefixes,T=N===void 0?"./":N,v="[^".concat(I(h.delimiter||"/#?"),"]+?"),R=[],E=0,S=0,C="",M=function(L){if(S<m.length&&m[S].type===L)return m[S++].value},G=function(L){var W=M(L);if(W!==void 0)return W;var P=m[S],J=P.index;throw new TypeError("Unexpected ".concat(P.type," at ").concat(J,", expected ").concat(L))},D=function(){for(var L,W="";L=M("CHAR")||M("ESCAPED_CHAR");)W+=L;return W};S<m.length;){var Y=M("CHAR"),ne=M("NAME"),ee=M("PATTERN");if(ne||ee)T.indexOf(K=Y||"")===-1&&(C+=K,K=""),C&&(R.push(C),C=""),R.push({name:ne||E++,prefix:K,suffix:"",pattern:ee||v,modifier:M("MODIFIER")||""});else{var U=Y||M("ESCAPED_CHAR");if(U)C+=U;else if(C&&(R.push(C),C=""),M("OPEN")){var K=D(),Q=M("NAME")||"",k=M("PATTERN")||"",V=D();G("CLOSE"),R.push({name:Q||(k?E++:""),pattern:Q&&!k?v:k,prefix:K,suffix:V,modifier:M("MODIFIER")||""})}else G("END")}}return R}(s,u),c,u)}(n,e,t)},se={__proto__:null,update:X,nextTick:function(){return new Promise(function(a){window.requestAnimationFrame(a)})},pathToRegexp:Z},z=function(){return window.location.origin},me=function(a){return a===void 0&&(a=window.location.href),$(a).port},$=function(a){var n,e=a.match(/:\d+/);if(e===null)/^http/.test(a)&&(n=80),/^https/.test(a)&&(n=443);else{var t=e[0].substring(1);n=parseInt(t,10)}var s,c=a.replace(z(),""),u={},d=c.indexOf("#");d>=0&&(s=c.slice(d+1),c=c.slice(0,d));var h=c.indexOf("?");return h>=0&&(u=Me(c.slice(h+1)),c=c.slice(0,h)),{hash:s,path:c,port:n,query:u}},Me=function(a){return a.split("&").reduce(function(n,e){var t=e.split("=");return n[t[0]]=t[1],n},{})},Re=function(a){return a===void 0&&(a=window.location.href),a.replace(/(\/#.*|\/|#.*)$/,"")},ht={__proto__:null,getHref:function(){return window.location.href},getAbsoluteHref:function(a,n){return n===void 0&&(n=document.baseURI),new URL(a,n).href},getOrigin:z,getPort:me,getPath:function(a){return a===void 0&&(a=window.location.href),$(a).path},getQuery:function(a,n){return n===void 0&&(n=!1),n?JSON.stringify($(a).query):$(a).query},getHash:function(a){return $(a).hash},parse:$,parseQuery:Me,clean:Re};function ut(a,n,e,t,s){return n===void 0&&(n=2e3),new Promise(function(c,u){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE){if(d.status===200){var h=d.responseURL!==""&&d.responseURL!==a?d.responseURL:a;c({html:d.responseText,url:o({href:h},$(h))}),t.update(a,{status:"fulfilled",target:h})}else if(d.status){var m={status:d.status,statusText:d.statusText};e(a,m),u(m),t.update(a,{status:"rejected"})}}},d.ontimeout=function(){var h=new Error("Timeout error ["+n+"]");e(a,h),u(h),t.update(a,{status:"rejected"})},d.onerror=function(){var h=new Error("Fetch error");e(a,h),u(h),t.update(a,{status:"rejected"})},d.open("GET",a),d.timeout=n,d.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),d.setRequestHeader("x-barba","yes"),s.all().forEach(function(h,m){d.setRequestHeader(m,h)}),d.send()})}function pt(a){return!!a&&(typeof a=="object"||typeof a=="function")&&typeof a.then=="function"}function ve(a,n){return n===void 0&&(n={}),function(){var e=arguments,t=!1,s=new Promise(function(c,u){n.async=function(){return t=!0,function(h,m){h?u(h):c(m)}};var d=a.apply(n,[].slice.call(e));t||(pt(d)?d.then(c,u):c(d))});return s}}var dt=function(a){function n(){var t;return(t=a.call(this)||this).logger=new H("@barba/core"),t.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],t.registered=new Map,t.init(),t}l(n,a);var e=n.prototype;return e.init=function(){var t=this;this.registered.clear(),this.all.forEach(function(s){t[s]||(t[s]=function(c,u){t.registered.has(s)||t.registered.set(s,new Set),t.registered.get(s).add({ctx:u||{},fn:c})})})},e.do=function(t){var s=arguments,c=this;if(this.registered.has(t)){var u=Promise.resolve();return this.registered.get(t).forEach(function(d){u=u.then(function(){return ve(d.fn,d.ctx).apply(void 0,[].slice.call(s,1))})}),u.catch(function(d){c.logger.debug("Hook error ["+t+"]"),c.logger.error(d)})}return Promise.resolve()},e.clear=function(){var t=this;this.all.forEach(function(s){delete t[s]}),this.init()},e.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var t=[];this.registered.forEach(function(s,c){return t.push(c)}),this.logger.info("Registered hooks: "+t.join(","))},n}(q),ae=new dt,$e=function(){function a(n){if(this.k=void 0,this.O=[],typeof n=="boolean")this.k=n;else{var e=Array.isArray(n)?n:[n];this.O=e.map(function(t){return Z(t)})}}return a.prototype.checkHref=function(n){if(typeof this.k=="boolean")return this.k;var e=$(n).path;return this.O.some(function(t){return t.exec(e)!==null})},a}(),ft=function(a){function n(t){var s;return(s=a.call(this,t)||this).T=new Map,s}l(n,a);var e=n.prototype;return e.set=function(t,s,c,u,d){return this.T.set(t,{action:c,request:s,status:u,target:d??t}),{action:c,request:s,status:u,target:d}},e.get=function(t){return this.T.get(t)},e.getRequest=function(t){return this.T.get(t).request},e.getAction=function(t){return this.T.get(t).action},e.getStatus=function(t){return this.T.get(t).status},e.getTarget=function(t){return this.T.get(t).target},e.has=function(t){return!this.checkHref(t)&&this.T.has(t)},e.delete=function(t){return this.T.delete(t)},e.update=function(t,s){var c=o({},this.T.get(t),s);return this.T.set(t,c),c},n}($e),mt=function(){function a(){this.A=new Map}var n=a.prototype;return n.set=function(e,t){return this.A.set(e,t),{name:t}},n.get=function(e){return this.A.get(e)},n.all=function(){return this.A},n.has=function(e){return this.A.has(e)},n.delete=function(e){return this.A.delete(e)},n.clear=function(){return this.A.clear()},a}(),vt=function(){return!window.history.pushState},gt=function(a){return!a.el||!a.href},wt=function(a){var n=a.event;return n.which>1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey},yt=function(a){var n=a.el;return n.hasAttribute("target")&&n.target==="_blank"},bt=function(a){var n=a.el;return n.protocol!==void 0&&window.location.protocol!==n.protocol||n.hostname!==void 0&&window.location.hostname!==n.hostname},Et=function(a){var n=a.el;return n.port!==void 0&&me()!==me(n.href)},St=function(a){var n=a.el;return n.getAttribute&&typeof n.getAttribute("download")=="string"},Lt=function(a){return a.el.hasAttribute(O.prefix+"-"+O.prevent)},xt=function(a){return!!a.el.closest("["+O.prefix+"-"+O.prevent+'="all"]')},Tt=function(a){var n=a.href;return Re(n)===Re()&&me(n)===me()},kt=function(a){function n(t){var s;return(s=a.call(this,t)||this).suite=[],s.tests=new Map,s.init(),s}l(n,a);var e=n.prototype;return e.init=function(){this.add("pushState",vt),this.add("exists",gt),this.add("newTab",wt),this.add("blank",yt),this.add("corsDomain",bt),this.add("corsPort",Et),this.add("download",St),this.add("preventSelf",Lt),this.add("preventAll",xt),this.add("sameUrl",Tt,!1)},e.add=function(t,s,c){c===void 0&&(c=!0),this.tests.set(t,s),c&&this.suite.push(t)},e.run=function(t,s,c,u){return this.tests.get(t)({el:s,event:c,href:u})},e.checkLink=function(t,s,c){var u=this;return this.suite.some(function(d){return u.run(d,t,s,c)})},n}($e),Ce=function(a){function n(e,t){var s;return t===void 0&&(t="Barba error"),(s=a.call.apply(a,[this].concat([].slice.call(arguments,2)))||this).error=void 0,s.label=void 0,s.error=e,s.label=t,Error.captureStackTrace&&Error.captureStackTrace(_(s),n),s.name="BarbaError",s}return l(n,a),n}(y(Error)),Pt=function(){function a(e){e===void 0&&(e=[]),this.logger=new H("@barba/core"),this.all=[],this.page=[],this.once=[],this.j=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],e&&(this.all=this.all.concat(e)),this.update()}var n=a.prototype;return n.add=function(e,t){e==="rule"?this.j.splice(t.position||0,0,t.value):this.all.push(t),this.update()},n.resolve=function(e,t){var s=this;t===void 0&&(t={});var c=t.once?this.once:this.page;c=c.filter(t.self?function(v){return v.name&&v.name==="self"}:function(v){return!v.name||v.name!=="self"});var u=new Map,d=c.find(function(v){var R=!0,E={};return t.self&&v.name==="self"?(u.set(v,E),!0):(s.j.reverse().forEach(function(S){R&&(R=s.M(v,S,e,E),v.from&&v.to&&(R=s.M(v,S,e,E,"from")&&s.M(v,S,e,E,"to")),v.from&&!v.to&&(R=s.M(v,S,e,E,"from")),!v.from&&v.to&&(R=s.M(v,S,e,E,"to")))}),u.set(v,E),R)}),h=u.get(d),m=[];if(m.push(t.once?"once":"page"),t.self&&m.push("self"),h){var N,T=[d];Object.keys(h).length>0&&T.push(h),(N=this.logger).info.apply(N,["Transition found ["+m.join(",")+"]"].concat(T))}else this.logger.info("No transition found ["+m.join(",")+"]");return d},n.update=function(){var e=this;this.all=this.all.map(function(t){return e.N(t)}).sort(function(t,s){return t.priority-s.priority}).reverse().map(function(t){return delete t.priority,t}),this.page=this.all.filter(function(t){return t.leave!==void 0||t.enter!==void 0}),this.once=this.all.filter(function(t){return t.once!==void 0})},n.M=function(e,t,s,c,u){var d=!0,h=!1,m=e,N=t.name,T=N,v=N,R=N,E=u?m[u]:m,S=u==="to"?s.next:s.current;if(u?E&&E[N]:E[N]){switch(t.type){case"strings":default:var C=Array.isArray(E[T])?E[T]:[E[T]];S[T]&&C.indexOf(S[T])!==-1&&(h=!0),C.indexOf(S[T])===-1&&(d=!1);break;case"object":var M=Array.isArray(E[v])?E[v]:[E[v]];S[v]?(S[v].name&&M.indexOf(S[v].name)!==-1&&(h=!0),M.indexOf(S[v].name)===-1&&(d=!1)):d=!1;break;case"function":E[R](s)?h=!0:d=!1}h&&(u?(c[u]=c[u]||{},c[u][N]=m[u][N]):c[N]=m[N])}return d},n.S=function(e,t,s){var c=0;return(e[t]||e.from&&e.from[t]||e.to&&e.to[t])&&(c+=Math.pow(10,s),e.from&&e.from[t]&&(c+=1),e.to&&e.to[t]&&(c+=2)),c},n.N=function(e){var t=this;e.priority=0;var s=0;return this.j.forEach(function(c,u){s+=t.S(e,c.name,u+1)}),e.priority=s,e},a}();function we(a,n){try{var e=a()}catch(t){return n(t)}return e&&e.then?e.then(void 0,n):e}var At=function(){function a(e){e===void 0&&(e=[]),this.logger=new H("@barba/core"),this.store=void 0,this.C=!1,this.store=new Pt(e)}var n=a.prototype;return n.get=function(e,t){return this.store.resolve(e,t)},n.doOnce=function(e){var t=e.data,s=e.transition;try{var c=function(){u.C=!1},u=this,d=s||{};u.C=!0;var h=we(function(){return Promise.resolve(u.L("beforeOnce",t,d)).then(function(){return Promise.resolve(u.once(t,d)).then(function(){return Promise.resolve(u.L("afterOnce",t,d)).then(function(){})})})},function(m){u.C=!1,u.logger.debug("Transition error [before/after/once]"),u.logger.error(m)});return Promise.resolve(h&&h.then?h.then(c):c())}catch(m){return Promise.reject(m)}},n.doPage=function(e){var t=e.data,s=e.transition,c=e.page,u=e.wrapper;try{var d=function(v){h.C=!1},h=this,m=s||{},N=m.sync===!0||!1;h.C=!0;var T=we(function(){function v(){return Promise.resolve(h.L("before",t,m)).then(function(){function E(C){return Promise.resolve(h.remove(t)).then(function(){return Promise.resolve(h.L("after",t,m)).then(function(){})})}var S=function(){if(N)return we(function(){return Promise.resolve(h.add(t,u)).then(function(){return Promise.resolve(h.L("beforeLeave",t,m)).then(function(){return Promise.resolve(h.L("beforeEnter",t,m)).then(function(){return Promise.resolve(Promise.all([h.leave(t,m),h.enter(t,m)])).then(function(){return Promise.resolve(h.L("afterLeave",t,m)).then(function(){return Promise.resolve(h.L("afterEnter",t,m)).then(function(){})})})})})})},function(D){if(h.H(D))throw new Ce(D,"Transition error [sync]")});var C=function(D){return we(function(){var Y=function(){if(M!==!1)return Promise.resolve(h.add(t,u)).then(function(){return Promise.resolve(h.L("beforeEnter",t,m)).then(function(){return Promise.resolve(h.enter(t,m,M)).then(function(){return Promise.resolve(h.L("afterEnter",t,m)).then(function(){})})})})}();if(Y&&Y.then)return Y.then(function(){})},function(Y){if(h.H(Y))throw new Ce(Y,"Transition error [before/after/enter]")})},M=!1,G=we(function(){return Promise.resolve(h.L("beforeLeave",t,m)).then(function(){return Promise.resolve(Promise.all([h.leave(t,m),X(c,t)]).then(function(D){return D[0]})).then(function(D){return M=D,Promise.resolve(h.L("afterLeave",t,m)).then(function(){})})})},function(D){if(h.H(D))throw new Ce(D,"Transition error [before/after/leave]")});return G&&G.then?G.then(C):C()}();return S&&S.then?S.then(E):E()})}var R=function(){if(N)return Promise.resolve(X(c,t)).then(function(){})}();return R&&R.then?R.then(v):v()},function(v){throw h.C=!1,v.name&&v.name==="BarbaError"?(h.logger.debug(v.label),h.logger.error(v.error),v):(h.logger.debug("Transition error [page]"),h.logger.error(v),v)});return Promise.resolve(T&&T.then?T.then(d):d())}catch(v){return Promise.reject(v)}},n.once=function(e,t){try{return Promise.resolve(ae.do("once",e,t)).then(function(){return t.once?ve(t.once,t)(e):Promise.resolve()})}catch(s){return Promise.reject(s)}},n.leave=function(e,t){try{return Promise.resolve(ae.do("leave",e,t)).then(function(){return t.leave?ve(t.leave,t)(e):Promise.resolve()})}catch(s){return Promise.reject(s)}},n.enter=function(e,t,s){try{return Promise.resolve(ae.do("enter",e,t)).then(function(){return t.enter?ve(t.enter,t)(e,s):Promise.resolve()})}catch(c){return Promise.reject(c)}},n.add=function(e,t){try{return B.addContainer(e.next.container,t),ae.do("nextAdded",e),Promise.resolve()}catch(s){return Promise.reject(s)}},n.remove=function(e){try{return B.removeContainer(e.current.container),ae.do("currentRemoved",e),Promise.resolve()}catch(t){return Promise.reject(t)}},n.H=function(e){return e.message?!/Timeout error|Fetch error/.test(e.message):!e.status},n.L=function(e,t,s){try{return Promise.resolve(ae.do(e,t,s)).then(function(){return s[e]?ve(s[e],s)(t):Promise.resolve()})}catch(c){return Promise.reject(c)}},r(a,[{key:"isRunning",get:function(){return this.C},set:function(e){this.C=e}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(e){return e.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(e){return e.to&&!e.to.route||e.sync})}}]),a}(),Ot=function(){function a(n){var e=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,n.length!==0&&(n.forEach(function(t){e.byNamespace.set(t.namespace,t)}),this.names.forEach(function(t){ae[t](e._(t))}))}return a.prototype._=function(n){var e=this;return function(t){var s=n.match(/enter/i)?t.next:t.current,c=e.byNamespace.get(s.namespace);return c&&c[n]?ve(c[n],c)(t):Promise.resolve()}},a}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(a){var n=this;do{if(n.matches(a))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null});var Ht={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},Nt=function(){function a(){this.version="2.10.3",this.schemaPage=Ht,this.Logger=H,this.logger=new H("@barba/core"),this.plugins=[],this.timeout=void 0,this.cacheIgnore=void 0,this.cacheFirstPage=void 0,this.prefetchIgnore=void 0,this.preventRunning=void 0,this.hooks=ae,this.cache=void 0,this.headers=void 0,this.prevent=void 0,this.transitions=void 0,this.views=void 0,this.dom=B,this.helpers=se,this.history=oe,this.request=ut,this.url=ht,this.D=void 0,this.B=void 0,this.q=void 0,this.F=void 0}var n=a.prototype;return n.use=function(e,t){var s=this.plugins;s.indexOf(e)>-1?this.logger.warn("Plugin ["+e.name+"] already installed."):typeof e.install=="function"?(e.install(this,t),s.push(e)):this.logger.warn("Plugin ["+e.name+'] has no "install" method.')},n.init=function(e){var t=e===void 0?{}:e,s=t.transitions,c=s===void 0?[]:s,u=t.views,d=u===void 0?[]:u,h=t.schema,m=h===void 0?O:h,N=t.requestError,T=t.timeout,v=T===void 0?2e3:T,R=t.cacheIgnore,E=R!==void 0&&R,S=t.cacheFirstPage,C=S!==void 0&&S,M=t.prefetchIgnore,G=M!==void 0&&M,D=t.preventRunning,Y=D!==void 0&&D,ne=t.prevent,ee=ne===void 0?null:ne,U=t.debug,K=t.logLevel;if(H.setLevel((U!==void 0&&U)===!0?"debug":K===void 0?"off":K),this.logger.info(this.version),Object.keys(m).forEach(function(V){O[V]&&(O[V]=m[V])}),this.B=N,this.timeout=v,this.cacheIgnore=E,this.cacheFirstPage=C,this.prefetchIgnore=G,this.preventRunning=Y,this.q=this.dom.getWrapper(),!this.q)throw new Error("[@barba/core] No Barba wrapper found");this.I();var Q=this.data.current;if(!Q.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new ft(E),this.headers=new mt,this.prevent=new kt(G),this.transitions=new At(c),this.views=new Ot(d),ee!==null){if(typeof ee!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",ee)}this.history.init(Q.url.href,Q.namespace),C&&this.cache.set(Q.url.href,Promise.resolve({html:Q.html,url:Q.url}),"init","fulfilled"),this.U=this.U.bind(this),this.$=this.$.bind(this),this.X=this.X.bind(this),this.G(),this.plugins.forEach(function(V){return V.init()});var k=this.data;k.trigger="barba",k.next=k.current,k.current=o({},this.schemaPage),this.hooks.do("ready",k),this.once(k),this.I()},n.destroy=function(){this.I(),this.J(),this.history.clear(),this.hooks.clear(),this.plugins=[]},n.force=function(e){window.location.assign(e)},n.go=function(e,t,s){var c;if(t===void 0&&(t="barba"),this.F=null,this.transitions.isRunning)this.force(e);else if(!(c=t==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(e)&&this.url.getQuery(this.history.current.url,!0)===this.url.getQuery(e,!0):this.prevent.run("sameUrl",null,null,e))||this.transitions.hasSelf)return t=this.history.change(this.cache.has(e)?this.cache.get(e).target:e,t,s),s&&(s.stopPropagation(),s.preventDefault()),this.page(e,t,s??void 0,c)},n.once=function(e){try{var t=this;return Promise.resolve(t.hooks.do("beforeEnter",e)).then(function(){function s(){return Promise.resolve(t.hooks.do("afterEnter",e)).then(function(){})}var c=function(){if(t.transitions.hasOnce){var u=t.transitions.get(e,{once:!0});return Promise.resolve(t.transitions.doOnce({transition:u,data:e})).then(function(){})}}();return c&&c.then?c.then(s):s()})}catch(s){return Promise.reject(s)}},n.page=function(e,t,s,c){try{var u,d=function(){var T=h.data;return Promise.resolve(h.hooks.do("page",T)).then(function(){var v=function(R,E){try{var S=(C=h.transitions.get(T,{once:!1,self:c}),Promise.resolve(h.transitions.doPage({data:T,page:u,transition:C,wrapper:h.q})).then(function(){h.I()}))}catch{return E()}var C;return S&&S.then?S.then(void 0,E):S}(0,function(){H.getLevel()===0&&h.force(T.next.url.href)});if(v&&v.then)return v.then(function(){})})},h=this;if(h.data.next.url=o({href:e},h.url.parse(e)),h.data.trigger=t,h.data.event=s,h.cache.has(e))u=h.cache.update(e,{action:"click"}).request;else{var m=h.request(e,h.timeout,h.onRequestError.bind(h,t),h.cache,h.headers);m.then(function(T){T.url.href!==e&&h.history.add(T.url.href,t,"replace")}),u=h.cache.set(e,m,"click","pending").request}var N=function(){if(h.transitions.shouldWait)return Promise.resolve(X(u,h.data)).then(function(){})}();return Promise.resolve(N&&N.then?N.then(d):d())}catch(T){return Promise.reject(T)}},n.onRequestError=function(e){this.transitions.isRunning=!1;var t=[].slice.call(arguments,1),s=t[0],c=t[1],u=this.cache.getAction(s);return this.cache.delete(s),this.B&&this.B(e,u,s,c)===!1||u==="click"&&this.force(s),!1},n.prefetch=function(e){var t=this;e=this.url.getAbsoluteHref(e),this.cache.has(e)||this.cache.set(e,this.request(e,this.timeout,this.onRequestError.bind(this,"barba"),this.cache,this.headers).catch(function(s){t.logger.error(s)}),"prefetch","pending")},n.G=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.U),document.addEventListener("touchstart",this.U)),document.addEventListener("click",this.$),window.addEventListener("popstate",this.X)},n.J=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.U),document.removeEventListener("touchstart",this.U)),document.removeEventListener("click",this.$),window.removeEventListener("popstate",this.X)},n.U=function(e){var t=this,s=this.W(e);if(s){var c=this.url.getAbsoluteHref(this.dom.getHref(s));this.prevent.checkHref(c)||this.cache.has(c)||this.cache.set(c,this.request(c,this.timeout,this.onRequestError.bind(this,s),this.cache,this.headers).catch(function(u){t.logger.error(u)}),"enter","pending")}},n.$=function(e){var t=this.W(e);if(t){if(this.transitions.isRunning&&this.preventRunning)return e.preventDefault(),void e.stopPropagation();this.F=e,this.go(this.dom.getHref(t),t,e)}},n.X=function(e){this.go(this.url.getHref(),"popstate",e)},n.W=function(e){for(var t=e.target;t&&!this.dom.getHref(t);)t=t.parentNode;if(t&&!this.prevent.checkLink(t,e,this.dom.getHref(t)))return t},n.I=function(){var e=this.url.getHref(),t={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:o({href:e},this.url.parse(e))};this.D={current:t,event:void 0,next:o({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},r(a,[{key:"data",get:function(){return this.D}},{key:"wrapper",get:function(){return this.q}}]),a}();return new Nt})});var Pe=Wt(Ye(),1);var he={wrapper:'[data-nav="wrapper"]',drawer:".drawer",container:".nav-container",toggle:'[data-nav="toggle"]',links:'[data-nav="links"] .nav-link',openIcon:'[data-nav-icon="open"]',closeIcon:'[data-nav-icon="close"]'},Ve=()=>{let i=document.querySelector(he.drawer)||document.querySelector(he.wrapper),r=document.querySelector(he.toggle),o=document.querySelector(he.openIcon),l=document.querySelector(he.closeIcon),p=Array.from(document.querySelectorAll(he.links));return!i||!r||!o||!l?null:{wrapper:i,toggle:r,openIcon:o,closeIcon:l,links:p}},qe="is-nav-open",Te="are-nav-links-visible",jt=320,be=()=>{let i=Ve();if(!i)return;let{wrapper:r,toggle:o,openIcon:l,closeIcon:p}=i;r.classList.remove(qe,Te),o.setAttribute("aria-expanded","false"),o.setAttribute("aria-pressed","false"),l.toggleAttribute("aria-hidden",!1),p.toggleAttribute("aria-hidden",!0),l.hidden=!1,p.hidden=!0},ue=i=>{let r=document.querySelector(he.container);r&&(r.style.opacity=i?"1":"0",r.style.pointerEvents=i?"":"none",r.style.visibility=i?"":"hidden")},We=()=>{let i=Ve();if(!i)return null;let{wrapper:r,toggle:o,openIcon:l,closeIcon:p,links:w}=i,x=window.matchMedia("(hover: hover)"),g={isOpen:!1,isLockedOpen:!1,hoverEnabled:x.matches},y=null,_=()=>{l.toggleAttribute("aria-hidden",g.isOpen),p.toggleAttribute("aria-hidden",!g.isOpen),l.hidden=g.isOpen,p.hidden=!g.isOpen},A=()=>{r.classList.toggle(qe,g.isOpen),o.setAttribute("aria-expanded",String(g.isOpen)),o.setAttribute("aria-pressed",String(g.isOpen)),_()},q=()=>{g.isOpen=!1,g.isLockedOpen=!1,r.classList.remove(qe,Te),o.setAttribute("aria-expanded","false"),o.setAttribute("aria-pressed","false"),_()},b=z=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(z)})},H=()=>{y!==null&&(window.clearTimeout(y),y=null),r.classList.add(Te)},I=()=>{y!==null&&window.clearTimeout(y),y=window.setTimeout(()=>{g.isOpen||r.classList.remove(Te)},jt)},F=z=>{H(),b(()=>{g.isOpen=!0,g.isLockedOpen=z?!0:g.isLockedOpen,A()})},O=()=>{g.isOpen=!1,g.isLockedOpen=!1,A(),I()},te=()=>{g.isOpen?O():F(!0)},B=()=>{!g.hoverEnabled||g.isLockedOpen||F(!1)},ie=()=>{!g.hoverEnabled||g.isLockedOpen||O()},oe=z=>{g.hoverEnabled=z.matches,!g.hoverEnabled&&g.isOpen&&!g.isLockedOpen&&O()},X=z=>{z.preventDefault(),te()},Z=z=>{z.key!=="Enter"&&z.key!==" "||(z.preventDefault(),te())},se=z=>{let $=z.currentTarget.getAttribute("href");$&&($.includes("verkada")||$.includes("film")||$.includes("about")||$.includes("work"))||O()};return o.setAttribute("role","button"),o.tabIndex=o.tabIndex>-1?o.tabIndex:0,o.setAttribute("aria-expanded","false"),o.setAttribute("aria-pressed","false"),o.setAttribute("aria-label","Toggle navigation"),_(),r.addEventListener("mouseenter",B),r.addEventListener("mouseleave",ie),x.addEventListener("change",oe),o.addEventListener("click",X),o.addEventListener("keydown",Z),w.forEach(z=>{z.addEventListener("click",se)}),()=>{y!==null&&(window.clearTimeout(y),y=null),r.removeEventListener("mouseenter",B),r.removeEventListener("mouseleave",ie),x.removeEventListener("change",oe),o.removeEventListener("click",X),o.removeEventListener("keydown",Z),w.forEach(z=>{z.removeEventListener("click",se)}),q()}};var Ft='[data-barba="wrapper"]',Bt='[data-nav="close-project"]',Ae="is-in-peripheral",pe=700,ke="cubic-bezier(0.4, 0, 0.2, 1)",Ge="data-loop-slider-snap",Ut='[data-barba="container"]',je=i=>{let r=document.documentElement,{body:o}=document;i?(r.style.setProperty("overflow-x","hidden"),o.style.setProperty("overflow-x","hidden")):(r.style.removeProperty("overflow-x"),o.style.removeProperty("overflow-x"))},Xt=()=>document.querySelector(Bt),Fe=i=>i?.getAttribute("data-barba-namespace")??null,Ee=i=>!!(i&&i!=="home"),$t=i=>{let o=new DOMParser().parseFromString(i,"text/html").body;if(!o)return;document.body.className=o.className;let l=o.getAttribute("data-wf-page");l?document.body.setAttribute("data-wf-page",l):document.body.removeAttribute("data-wf-page")},Yt=()=>{let i=window.Webflow;if(!i)return;i.destroy&&i.destroy(),i.ready&&i.ready();let r=i.require?.("ix2");r?.init&&r.init()},Vt=(i,r)=>!!(!r||i?.closest("[data-barba-prevent]")||r.startsWith("#")||r.startsWith("mailto:")||r.startsWith("tel:")||r.startsWith("javascript:")||i?.getAttribute("target")==="_blank"||new URL(r,window.location.href).origin!==window.location.origin),Se=i=>{let r=Xt();r&&(r.classList.toggle("is-visible",i),r.style.pointerEvents=i?"auto":"none",r.style.display=i?"":"none",r.style.setProperty("z-index","var(--close-z, 20)","important"),r.style.setProperty("background-color","transparent","important"),r.style.setProperty("background","transparent","important"),r.setAttribute("aria-hidden",String(!i)))},Gt=()=>{let i=document.querySelector(Ut),r=Fe(i),o=Ee(r);document.body.classList.toggle(Ae,o),Se(o),je(!o)},Ke=({onAfterEnter:i,onBeforeLeave:r})=>{document.querySelector(Ft)&&(Gt(),Pe.default.init({preventRunning:!0,prevent:({el:o,href:l})=>Vt(o,l),transitions:[{name:"home-to-peripheral",from:{namespace:["home"]},to:{namespace:["verkada","film","about","work"]},sync:!0,beforeEnter:()=>{Se(!0)},leave:async({current:o})=>{r?.();let l=o.container;l&&(l.style.transition=`opacity ${pe}ms ${ke}`,l.style.opacity="0",await new Promise(p=>setTimeout(p,pe)))},enter:async({next:o})=>{window.scrollTo(0,0),document.body.classList.add(Ae),be();let l=o.container;l&&(l.style.opacity="0",l.offsetWidth,requestAnimationFrame(()=>{l.style.transition=`opacity ${pe}ms ${ke}`,l.style.opacity="1"})),await new Promise(p=>setTimeout(p,pe))}},{name:"peripheral-to-home",from:{namespace:["verkada","film","about","work"]},to:{namespace:["home"]},sync:!0,beforeEnter:({next:o})=>{o.container&&(je(!0),Se(!1))},leave:async({current:o})=>{r?.();let l=o.container;l&&(l.style.transition=`opacity ${pe}ms ${ke}`,l.style.opacity="0"),document.body.classList.remove(Ae),window.scrollTo(0,0),await new Promise(p=>setTimeout(p,pe))},enter:async({next:o})=>{Se(!1),ue(!0);let l=o.container;l&&(l.style.transition=`opacity ${pe}ms ${ke}`,l.style.opacity="1")}}]}),Pe.default.hooks.beforeEnter(o=>{$t(o.next.html),window.scrollTo(0,0)}),Pe.default.hooks.afterEnter(o=>{let l=Fe(o.next.container),p=Fe(o.current?.container);l==="home"&&Ee(p)?document.body.setAttribute(Ge,"true"):document.body.removeAttribute(Ge),document.body.classList.toggle(Ae,Ee(l)),Se(Ee(l)),je(!Ee(l)),Yt(),i(),l==="home"&&window.requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize")),window.dispatchEvent(new Event("scroll"))})}))};var Kt="1.3.16";function Ze(i,r,o){return Math.max(i,Math.min(r,o))}function Qt(i,r,o){return(1-o)*i+o*r}function Jt(i,r,o,l){return Qt(i,r,1-Math.exp(-o*l))}function Zt(i,r){return(i%r+r)%r}var ei=class{constructor(){f(this,"isRunning",!1);f(this,"value",0);f(this,"from",0);f(this,"to",0);f(this,"currentTime",0);f(this,"lerp");f(this,"duration");f(this,"easing");f(this,"onUpdate")}advance(i){if(!this.isRunning)return;let r=!1;if(this.duration&&this.easing){this.currentTime+=i;let o=Ze(0,this.currentTime/this.duration,1);r=o>=1;let l=r?1:this.easing(o);this.value=this.from+(this.to-this.from)*l}else this.lerp?(this.value=Jt(this.value,this.to,this.lerp*60,i),Math.round(this.value)===this.to&&(this.value=this.to,r=!0)):(this.value=this.to,r=!0);r&&this.stop(),this.onUpdate?.(this.value,r)}stop(){this.isRunning=!1}fromTo(i,r,{lerp:o,duration:l,easing:p,onStart:w,onUpdate:x}){this.from=this.value=i,this.to=r,this.lerp=o,this.duration=l,this.easing=p,this.currentTime=0,this.isRunning=!0,w?.(),this.onUpdate=x}};function ti(i,r){let o;return function(...l){let p=this;clearTimeout(o),o=setTimeout(()=>{o=void 0,i.apply(p,l)},r)}}var ii=class{constructor(i,r,{autoResize:o=!0,debounce:l=250}={}){f(this,"width",0);f(this,"height",0);f(this,"scrollHeight",0);f(this,"scrollWidth",0);f(this,"debouncedResize");f(this,"wrapperResizeObserver");f(this,"contentResizeObserver");f(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});f(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});f(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=i,this.content=r,o&&(this.debouncedResize=ti(this.resize,l),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){this.wrapperResizeObserver?.disconnect(),this.contentResizeObserver?.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},et=class{constructor(){f(this,"events",{})}emit(i,...r){let o=this.events[i]||[];for(let l=0,p=o.length;l<p;l++)o[l]?.(...r)}on(i,r){return this.events[i]?.push(r)||(this.events[i]=[r]),()=>{this.events[i]=this.events[i]?.filter(o=>r!==o)}}off(i,r){this.events[i]=this.events[i]?.filter(o=>r!==o)}destroy(){this.events={}}},Qe=100/6,le={passive:!1},ri=class{constructor(i,r={wheelMultiplier:1,touchMultiplier:1}){f(this,"touchStart",{x:0,y:0});f(this,"lastDelta",{x:0,y:0});f(this,"window",{width:0,height:0});f(this,"emitter",new et);f(this,"onTouchStart",i=>{let{clientX:r,clientY:o}=i.targetTouches?i.targetTouches[0]:i;this.touchStart.x=r,this.touchStart.y=o,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:i})});f(this,"onTouchMove",i=>{let{clientX:r,clientY:o}=i.targetTouches?i.targetTouches[0]:i,l=-(r-this.touchStart.x)*this.options.touchMultiplier,p=-(o-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=r,this.touchStart.y=o,this.lastDelta={x:l,y:p},this.emitter.emit("scroll",{deltaX:l,deltaY:p,event:i})});f(this,"onTouchEnd",i=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:i})});f(this,"onWheel",i=>{let{deltaX:r,deltaY:o,deltaMode:l}=i,p=l===1?Qe:l===2?this.window.width:1,w=l===1?Qe:l===2?this.window.height:1;r*=p,o*=w,r*=this.options.wheelMultiplier,o*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:r,deltaY:o,event:i})});f(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=i,this.options=r,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,le),this.element.addEventListener("touchstart",this.onTouchStart,le),this.element.addEventListener("touchmove",this.onTouchMove,le),this.element.addEventListener("touchend",this.onTouchEnd,le)}on(i,r){return this.emitter.on(i,r)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,le),this.element.removeEventListener("touchstart",this.onTouchStart,le),this.element.removeEventListener("touchmove",this.onTouchMove,le),this.element.removeEventListener("touchend",this.onTouchEnd,le)}},Je=i=>Math.min(1,1.001-Math.pow(2,-10*i)),tt=class{constructor({wrapper:i=window,content:r=document.documentElement,eventsTarget:o=i,smoothWheel:l=!0,syncTouch:p=!1,syncTouchLerp:w=.075,touchInertiaExponent:x=1.7,duration:g,easing:y,lerp:_=.1,infinite:A=!1,orientation:q="vertical",gestureOrientation:b=q==="horizontal"?"both":"vertical",touchMultiplier:H=1,wheelMultiplier:I=1,autoResize:F=!0,prevent:O,virtualScroll:te,overscroll:B=!0,autoRaf:ie=!1,anchors:oe=!1,autoToggle:X=!1,allowNestedScroll:Z=!1,__experimental__naiveDimensions:se=!1}={}){f(this,"_isScrolling",!1);f(this,"_isStopped",!1);f(this,"_isLocked",!1);f(this,"_preventNextNativeScrollEvent",!1);f(this,"_resetVelocityTimeout",null);f(this,"__rafID",null);f(this,"isTouching");f(this,"time",0);f(this,"userData",{});f(this,"lastVelocity",0);f(this,"velocity",0);f(this,"direction",0);f(this,"options");f(this,"targetScroll");f(this,"animatedScroll");f(this,"animate",new ei);f(this,"emitter",new et);f(this,"dimensions");f(this,"virtualScroll");f(this,"onScrollEnd",i=>{i instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&i.stopPropagation()});f(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});f(this,"onTransitionEnd",i=>{i.propertyName.includes("overflow")&&this.checkOverflow()});f(this,"onClick",i=>{let o=i.composedPath().find(l=>l instanceof HTMLAnchorElement&&l.getAttribute("href")?.includes("#"));if(o){let l=o.getAttribute("href");if(l){let p=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0,w=`#${l.split("#")[1]}`;this.scrollTo(w,p)}}});f(this,"onPointerDown",i=>{i.button===1&&this.reset()});f(this,"onVirtualScroll",i=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(i)===!1)return;let{deltaX:r,deltaY:o,event:l}=i;if(this.emitter.emit("virtual-scroll",{deltaX:r,deltaY:o,event:l}),l.ctrlKey||l.lenisStopPropagation)return;let p=l.type.includes("touch"),w=l.type.includes("wheel");this.isTouching=l.type==="touchstart"||l.type==="touchmove";let x=r===0&&o===0;if(this.options.syncTouch&&p&&l.type==="touchstart"&&x&&!this.isStopped&&!this.isLocked){this.reset();return}let y=this.options.gestureOrientation==="vertical"&&o===0||this.options.gestureOrientation==="horizontal"&&r===0;if(x||y)return;let _=l.composedPath();_=_.slice(0,_.indexOf(this.rootElement));let A=this.options.prevent;if(_.find(O=>O instanceof HTMLElement&&(typeof A=="function"&&A?.(O)||O.hasAttribute?.("data-lenis-prevent")||p&&O.hasAttribute?.("data-lenis-prevent-touch")||w&&O.hasAttribute?.("data-lenis-prevent-wheel")||this.options.allowNestedScroll&&this.checkNestedScroll(O,{deltaX:r,deltaY:o}))))return;if(this.isStopped||this.isLocked){l.cancelable&&l.preventDefault();return}if(!(this.options.syncTouch&&p||this.options.smoothWheel&&w)){this.isScrolling="native",this.animate.stop(),l.lenisStopPropagation=!0;return}let b=o;this.options.gestureOrientation==="both"?b=Math.abs(o)>Math.abs(r)?o:r:this.options.gestureOrientation==="horizontal"&&(b=r),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&this.limit>0&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&o>0||this.animatedScroll===this.limit&&o<0))&&(l.lenisStopPropagation=!0),l.cancelable&&l.preventDefault();let H=p&&this.options.syncTouch,F=p&&l.type==="touchend";F&&(b=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+b,{programmatic:!1,...H?{lerp:F?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})});f(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){let i=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-i,this.direction=Math.sign(this.animatedScroll-i),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});f(this,"raf",i=>{let r=i-(this.time||i);this.time=i,this.animate.advance(r*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))});window.lenisVersion=Kt,(!i||i===document.documentElement)&&(i=window),typeof g=="number"&&typeof y!="function"?y=Je:typeof y=="function"&&typeof g!="number"&&(g=1),this.options={wrapper:i,content:r,eventsTarget:o,smoothWheel:l,syncTouch:p,syncTouchLerp:w,touchInertiaExponent:x,duration:g,easing:y,lerp:_,infinite:A,gestureOrientation:b,orientation:q,touchMultiplier:H,wheelMultiplier:I,autoResize:F,prevent:O,virtualScroll:te,overscroll:B,autoRaf:ie,anchors:oe,autoToggle:X,allowNestedScroll:Z,__experimental__naiveDimensions:se},this.dimensions=new ii(i,r,{autoResize:F}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new ri(o,{touchMultiplier:H,wheelMultiplier:I}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&(this.checkOverflow(),this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0})),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(i,r){return this.emitter.on(i,r)}off(i,r){return this.emitter.off(i,r)}get overflow(){let i=this.isHorizontal?"overflow-x":"overflow-y";return getComputedStyle(this.rootElement)[i]}checkOverflow(){["hidden","clip"].includes(this.overflow)?this.internalStop():this.internalStart()}setScroll(i){this.isHorizontal?this.options.wrapper.scrollTo({left:i,behavior:"instant"}):this.options.wrapper.scrollTo({top:i,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){if(this.isStopped){if(this.options.autoToggle){this.rootElement.style.removeProperty("overflow");return}this.internalStart()}}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){if(!this.isStopped){if(this.options.autoToggle){this.rootElement.style.setProperty("overflow","clip");return}this.internalStop()}}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}scrollTo(i,{offset:r=0,immediate:o=!1,lock:l=!1,duration:p=this.options.duration,easing:w=this.options.easing,lerp:x=this.options.lerp,onStart:g,onComplete:y,force:_=!1,programmatic:A=!0,userData:q}={}){if(!((this.isStopped||this.isLocked)&&!_)){if(typeof i=="string"&&["top","left","start","#"].includes(i))i=0;else if(typeof i=="string"&&["bottom","right","end"].includes(i))i=this.limit;else{let b;if(typeof i=="string"?(b=document.querySelector(i),b||(i==="#top"?i=0:console.warn("Lenis: Target not found",i))):i instanceof HTMLElement&&i?.nodeType&&(b=i),b){if(this.options.wrapper!==window){let I=this.rootElement.getBoundingClientRect();r-=this.isHorizontal?I.left:I.top}let H=b.getBoundingClientRect();i=(this.isHorizontal?H.left:H.top)+this.animatedScroll}}if(typeof i=="number"){if(i+=r,i=Math.round(i),this.options.infinite){if(A){this.targetScroll=this.animatedScroll=this.scroll;let b=i-this.animatedScroll;b>this.limit/2?i=i-this.limit:b<-this.limit/2&&(i=i+this.limit)}}else i=Ze(0,i,this.limit);if(i===this.targetScroll){g?.(this),y?.(this);return}if(this.userData=q??{},o){this.animatedScroll=this.targetScroll=i,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),y?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}A||(this.targetScroll=i),typeof p=="number"&&typeof w!="function"?w=Je:typeof w=="function"&&typeof p!="number"&&(p=1),this.animate.fromTo(this.animatedScroll,i,{duration:p,easing:w,lerp:x,onStart:()=>{l&&(this.isLocked=!0),this.isScrolling="smooth",g?.(this)},onUpdate:(b,H)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=b-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=b,this.setScroll(this.scroll),A&&(this.targetScroll=b),H||this.emit(),H&&(this.reset(),this.emit(),y?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(i,{deltaX:r,deltaY:o}){let l=Date.now(),p=i._lenis??(i._lenis={}),w,x,g,y,_,A,q,b,H=this.options.gestureOrientation;if(l-(p.time??0)>2e3){p.time=Date.now();let X=window.getComputedStyle(i);p.computedStyle=X;let Z=X.overflowX,se=X.overflowY;if(w=["auto","overlay","scroll"].includes(Z),x=["auto","overlay","scroll"].includes(se),p.hasOverflowX=w,p.hasOverflowY=x,!w&&!x||H==="vertical"&&!x||H==="horizontal"&&!w)return!1;_=i.scrollWidth,A=i.scrollHeight,q=i.clientWidth,b=i.clientHeight,g=_>q,y=A>b,p.isScrollableX=g,p.isScrollableY=y,p.scrollWidth=_,p.scrollHeight=A,p.clientWidth=q,p.clientHeight=b}else g=p.isScrollableX,y=p.isScrollableY,w=p.hasOverflowX,x=p.hasOverflowY,_=p.scrollWidth,A=p.scrollHeight,q=p.clientWidth,b=p.clientHeight;if(!w&&!x||!g&&!y||H==="vertical"&&(!x||!y)||H==="horizontal"&&(!w||!g))return!1;let I;if(H==="horizontal")I="x";else if(H==="vertical")I="y";else{let X=r!==0,Z=o!==0;X&&w&&g&&(I="x"),Z&&x&&y&&(I="y")}if(!I)return!1;let F,O,te,B,ie;if(I==="x")F=i.scrollLeft,O=_-q,te=r,B=w,ie=g;else if(I==="y")F=i.scrollTop,O=A-b,te=o,B=x,ie=y;else return!1;return(te>0?F<O:F>0)&&B&&ie}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){let i=this.options.wrapper;return this.isHorizontal?i.scrollX??i.scrollLeft:i.scrollY??i.scrollTop}get scroll(){return this.options.infinite?Zt(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(i){this._isScrolling!==i&&(this._isScrolling=i,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(i){this._isStopped!==i&&(this._isStopped=i,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(i){this._isLocked!==i&&(this._isLocked=i,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let i="lenis";return this.options.autoToggle&&(i+=" lenis-autoToggle"),this.isStopped&&(i+=" lenis-stopped"),this.isLocked&&(i+=" lenis-locked"),this.isScrolling&&(i+=" lenis-scrolling"),this.isScrolling==="smooth"&&(i+=" lenis-smooth"),i}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};var re={root:['[data-loop-slider="root"]',".loop-slider-wrapper",".slider-section"],track:['[data-loop-slider="track"]',".loop-slider-track"],list:['[data-loop-slider="list"]',".slider-wrapper"],loop:['[data-loop-slider="loop"]',".loop-slider.w-dyn-list",".loop-slider"],item:['[data-loop-slider="item"]',".slide-w"],content:['[data-loop-slider="content"]',".slide"],blur:['[data-loop-slider="blur"]',".slide-blur"],media:['[data-loop-slider="focus"]',".work-list-img-wrap img",".work-list-img-wrap"]},ni={baseScale:.8,focusScale:1,blurMax:80,translateMax:0,lerp:.08,progressLerp:.12,minOpacity:.2},it="loop-slider-lenis-styles",oi="html.lenis,html.lenis body{height:auto}.lenis:not(.lenis-autoToggle).lenis-stopped{overflow:clip}.lenis [data-lenis-prevent],.lenis [data-lenis-prevent-wheel],.lenis [data-lenis-prevent-touch]{overscroll-behavior:contain}.lenis.lenis-smooth iframe{pointer-events:none}.lenis.lenis-autoToggle{transition-property:overflow;transition-duration:1ms;transition-behavior:allow-discrete}",Oe="data-loop-slider-snap",ge=null,He=!1,Ne=!1,Le=[],si=(i,r,o)=>Math.max(r,Math.min(o,i)),ai=()=>{if(document.getElementById(it))return;let i=document.createElement("style");i.id=it,i.textContent=oi,document.head.appendChild(i)},de=(i,r)=>{for(let o of r){let l=i.querySelector(o);if(l)return l}return null},Be=(i,r)=>{for(let o of r){let l=Array.from(i.querySelectorAll(o));if(l.length)return l}return[]},li=()=>Be(document,re.root).filter(r=>de(r,re.list)),Ue=class{constructor(r){f(this,"root");f(this,"prefersInfinite");f(this,"config",ni);f(this,"slides",[]);f(this,"viewportHeight",window.innerHeight||0);f(this,"primaryList",null);f(this,"loopHeight",0);f(this,"loopOffset",0);f(this,"virtualScroll",0);f(this,"loopIndex",0);f(this,"previousScroll",null);f(this,"trackElement",null);f(this,"loopLists",[]);f(this,"localLenis",null);f(this,"localLenisRaf",null);f(this,"handleLenisScroll");this.root=r,this.prefersInfinite=r.dataset.loopSliderInfinite!=="false";let o=de(r,re.track),l=de(r,re.list);if(!l||!o)throw new Error('Loop slider list not found. Add data-loop-slider="list" to the slider wrapper.');this.primaryList=l,this.loopHeight=this.primaryList.scrollHeight,this.trackElement=o,this.prepareLoopLists(o),this.prefersInfinite&&this.initLocalLenis(),this.collectSlides()}destroy(){this.handleLenisScroll&&this.localLenis&&this.localLenis.off("scroll",this.handleLenisScroll),this.localLenisRaf!==null&&(window.cancelAnimationFrame(this.localLenisRaf),this.localLenisRaf=null),this.localLenis?.destroy(),this.localLenis=null}initLocalLenis(){if(this.localLenis||!this.trackElement)return;ai(),this.root.style.overflow=this.root.style.overflow||"hidden",this.root.style.position=this.root.style.position||"relative",this.trackElement.style.willChange=this.trackElement.style.willChange||"transform",this.localLenis=new tt({wrapper:this.root,content:this.trackElement,smoothWheel:!0,infinite:!0,syncTouch:!0,touchMultiplier:.65}),this.handleLenisScroll=()=>{this.measure()},this.localLenis.on("scroll",this.handleLenisScroll);let r=o=>{this.localLenis?.raf(o),this.localLenisRaf=window.requestAnimationFrame(r)};this.localLenisRaf=window.requestAnimationFrame(r)}collectSlides(){let r=Be(this.root,re.item);this.slides=r.map(o=>({node:o,contentNode:de(o,re.content)??o,blurNode:de(o,re.blur),focusNodes:(()=>{let l=[],p=de(o,re.media),w=o.querySelector(".work-title");return p&&l.push(p),w&&l.push(w),l.length||l.push(de(o,re.content)??o),l})(),progress:0,targetProgress:0,scale:this.config.baseScale,targetScale:this.config.baseScale})),this.slides.forEach(o=>{let l=o.contentNode;l.style.willChange="transform, opacity, filter",l.style.transformOrigin="center center",l.style.position=l.style.position||"relative"})}applySlideStyles(r){let o=this.config.minOpacity+(1-this.config.minOpacity)*r.progress,l=(1-r.progress)*this.config.blurMax;r.contentNode.style.transform=`scale(${r.scale.toFixed(4)})`,r.contentNode.style.opacity=o.toFixed(3),r.focusNodes.forEach(p=>{p.style.filter=`blur(${l.toFixed(2)}px)`}),r.blurNode&&(r.blurNode.style.opacity=(1-r.progress).toFixed(3),r.blurNode.style.filter=`blur(${Math.max(l,this.config.blurMax*.6).toFixed(2)}px)`)}prepareLoopLists(r){if(this.loopLists=Be(r,re.loop),!this.loopLists.length){this.loopLists=[];return}if(this.loopLists.length<2){let o=this.loopLists[0].cloneNode(!0);r.appendChild(o),this.loopLists.push(o)}}rotateLists(r){if(!(!this.trackElement||!this.loopLists.length))if(r==="forward"){let o=this.loopLists.shift();if(!o)return;this.trackElement.appendChild(o),this.loopLists.push(o)}else{let o=this.loopLists.pop();if(!o)return;let l=this.trackElement.firstElementChild;l?this.trackElement.insertBefore(o,l):this.trackElement.appendChild(o),this.loopLists.unshift(o)}}computeLoopHeight(){if(!this.primaryList)return this.loopHeight;let r=this.primaryList.scrollHeight||this.primaryList.offsetHeight;return r&&(this.loopHeight=r),this.loopHeight}applyLoopOffset(){if(!this.prefersInfinite||!this.localLenis||!this.trackElement)return;let r=this.loopHeight||this.computeLoopHeight();if(!r)return;let{scroll:o}=this.localLenis,l=Math.max(this.localLenis.limit||r,r);if(this.previousScroll===null){this.previousScroll=o,this.virtualScroll=0,this.loopIndex=0,this.loopOffset=0,this.trackElement.style.transform="";return}let p=o-this.previousScroll;Math.abs(p)>l*.5&&(p+=p>0?-l:l),this.virtualScroll+=p,this.previousScroll=o;let x=Math.floor(this.virtualScroll/r)-this.loopIndex;for(;x>0;)this.rotateLists("forward"),this.loopIndex+=1,x-=1;for(;x<0;)this.rotateLists("backward"),this.loopIndex-=1,x+=1;let g=this.virtualScroll-this.loopIndex*r;this.loopOffset=o-g,this.trackElement.style.transform=`translate3d(0, ${this.loopOffset}px, 0)`}measure(){if(!this.slides.length)return;let r=Math.max(window.innerHeight,1);this.viewportHeight=r,this.computeLoopHeight(),this.applyLoopOffset();let o=0,l=r;this.slides.forEach(p=>{let w=p.node.getBoundingClientRect(),x=w.top,g=w.bottom,y=Math.max(w.height,1),_=Math.max(o,x),A=Math.min(l,g),q=Math.max(0,A-_),b=si(q/y,0,1);p.targetProgress=b,p.targetScale=this.config.baseScale+(this.config.focusScale-this.config.baseScale)*b})}animate(){this.slides.length&&this.slides.forEach(r=>{r.scale+=(r.targetScale-r.scale)*this.config.lerp,r.progress+=(r.targetProgress-r.progress)*this.config.progressLerp,this.applySlideStyles(r)})}syncToTargets(){this.slides.length&&this.slides.forEach(r=>{r.scale=r.targetScale,r.progress=r.targetProgress,this.applySlideStyles(r)})}},Xe=()=>{Le.forEach(i=>i.measure())},rt=()=>{Xe()},nt=()=>{Xe()},ci=()=>{He||(window.addEventListener("scroll",rt,{passive:!0}),He=!0)},hi=()=>{Ne||(window.addEventListener("resize",nt),Ne=!0)},ui=()=>{if(ge!==null)return;let i=()=>{Le.forEach(r=>r.animate()),ge=window.requestAnimationFrame(i)};ge=window.requestAnimationFrame(i)},ot=()=>{ge!==null&&(window.cancelAnimationFrame(ge),ge=null),He&&(window.removeEventListener("scroll",rt),He=!1),Ne&&(window.removeEventListener("resize",nt),Ne=!1),Le.forEach(i=>i.destroy()),Le.length=0},st=()=>{let i=document.body.hasAttribute(Oe),r=li();if(!r.length){i&&document.body.removeAttribute(Oe);return}if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){i&&document.body.removeAttribute(Oe);return}let l=r.map(p=>{try{return new Ue(p)}catch(w){return console.warn(w),null}}).filter(p=>!!p);l.length&&(Le.push(...l),ci(),hi(),Xe(),i&&(l.forEach(p=>p.syncToTargets()),document.body.removeAttribute(Oe)),ui())};var fe=null,ct=()=>{fe?.(),fe=null,ot()},at=()=>{ct(),document.body.classList.contains("is-in-peripheral")?(be(),ue(!1),fe=null):(ue(!0),fe=We()),st(),window.requestAnimationFrame(()=>{fe?.(),document.body.classList.contains("is-in-peripheral")?(be(),ue(!1),fe=null):(ue(!0),fe=We())})},lt=()=>{at(),Ke({onBeforeLeave:ct,onAfterEnter:at})};document.readyState==="complete"||document.readyState==="interactive"?lt():document.addEventListener("DOMContentLoaded",lt);})();
